/*********************************************************************************
//概述：
//作者：大胡子书生     时间：       地点：
//CPU型号：         系统主频：
//版本号：V0.0        
*********************************************************************************/
/*********************************************************************************
文件包含区
*********************************************************************************/
#include "..\inc\PowerConfig.h"
/*********************************************************************************
常量定义区
*********************************************************************************/
/*********************************************************************************
公共变量定义区
*********************************************************************************/

/*********************************************************************************
外部变量声明区
*********************************************************************************/

/*********************************************************************************
私有变量定义区
*********************************************************************************/
/*********************************************************************************
测试变量定义区
*********************************************************************************/

/*********************************************************************************
内部函数定义区
*********************************************************************************/

/*********************************************************************************
功能代码定义区
*********************************************************************************/

/*********************************************************************************
 Function:      //
 Description:   //
 Input:         //
                //
 Output:        //
 Return:        //
 Others:        //
*********************************************************************************/
void EthernetPowerON_Order (void)
{
 ErthNet_PowerOFF( );
 DelymS(2); 
 //_5V_flg.Bit.EtherNet_EN = 1;
 //_5V0_ON( );
 DelymS(300); 
 ErthNet_PowerON( );
}
/*********************************************************************************
 Function:      //
 Description:   //
 Input:         //
                //
 Output:        //
 Return:        //
 Others:        //
*********************************************************************************/
void EthernetPowerOFF_Order (void)
{
 ErthNet_PowerOFF( );
 //_5V_flg.Bit.EtherNet_EN = 0;
 //if(0 == (_5V_flg.CCR & _5V_EnMark))
 //{_5V0_OFF( ) ;}
}
/*********************************************************************************
 Function:      //
 Description:   //
 Input:         //
                //
 Output:        //
 Return:        //
 Others:        //
*********************************************************************************/
void WifiPowerON_Order (void)
{
 Wifi_PowerOFF( );
 DelymS (10); 
 //_5V_flg.Bit.Wifi_EN = 1;
 //_5V0_ON( );
 //dely_ms (300); 
 Wifi_PowerON( );
}
/*********************************************************************************
 Function:      //
 Description:   //
 Input:         //
                //
 Output:        //
 Return:        //
 Others:        //
*********************************************************************************/
void WifiPowerOFF_Order (void)
{
 Wifi_PowerOFF( );
 //_5V_flg.Bit.Wifi_EN = 0;
 //if(0 == (_5V_flg.CCR & _5V_EnMark))
 //{_5V0_OFF ( ) ;}
}
/*********************************************************************************
 Function:      //
 Description:   //
 Input:         //
                //
 Output:        //
 Return:        //
 Others:        //
*********************************************************************************/
void PowerOut_Cmd (CommPortNumber_Type channel, FunctionalState NewState)
{ 
  if(Rs485_PortA & channel)
  {
    if(ENABLE == NewState)
    {set_OUT_CH3_ENpin; }
    else
    {clr_OUT_CH3_ENpin;}  
  }
  if(Rs485_PortB & channel)
  {
    if(ENABLE == NewState)
    {set_OUT_CH2_ENpin; }
    else
    {clr_OUT_CH2_ENpin;}  
  }
  if(Rs485_PortC & channel)
  {
    if(ENABLE == NewState)
    {set_OUT_CH1_ENpin; }
    else
    {clr_OUT_CH1_ENpin;}  
  }
}
/*********************************************************************************
 Function:      //
 Description:   //
 Input:         //
                //
 Output:        //
 Return:        //
 Others:        //
*********************************************************************************/
FunctionalState getPowerOut_State (CommPortNumber_Type channel)
{
  FunctionalState state;
  switch( channel)
  {
   case Rs485_PortA : 
    {
     if(OUT_CH3_ENpin)
     {state = ENABLE;}
     else
     {state = DISABLE;}
     break;
    }
   case Rs485_PortB:
    {
     if(OUT_CH2_ENpin)
     {state = ENABLE;}
     else
     {state = DISABLE;}
     break;
    }
   case Rs485_PortC:
    {
     if(OUT_CH1_ENpin)
     {state = ENABLE;}
     else
     {state = DISABLE;}
     break;
    }
    case Rs485_ALL:
    {
     if((OUT_CH1_ENpin)||(OUT_CH2_ENpin)||(OUT_CH3_ENpin))
     {state = ENABLE;}
     else
     {state = DISABLE;}
     break;
    } 
   default:
   {
     state = DISABLE;
     break;
   }
  }
  return state;
}
/***********************************END******************************************/